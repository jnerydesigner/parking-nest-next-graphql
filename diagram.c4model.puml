@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml
!define ICONURL https://raw.githubusercontent.com/tupadr3/plantuml-icon-font-sprites/v2.4.0
!define DEVICONS https://raw.githubusercontent.com/tupadr3/plantuml-icon-font-sprites/master/devicons

!include ICONURL/devicons2/nestjs.puml
!include ICONURL/devicons2/nextjs_original.puml
!include ICONURL/devicons2/mongodb.puml
!include ICONURL/material/add_to_queue.puml

title "Estacionamento"

LAYOUT_WITH_LEGEND()


Person(admin, "Admin Front", "Administrador Front End")
Person(user, "Usuário Mobile", "Usuário do Mobile")

System_Boundary(c1, "Front End") {
    Container(frontweb, "SPA", "NextJs", "Plataforma Web Administracao", $sprite="nextjs_original")
}

System_Boundary(c2, "BFF API") {
    Container(bff, "BFF", "NestJS", "BFF ADMINISTRATIVO", $sprite="nestjs")
}

System_Boundary(c3, "MICROSERVICES") {
    Container(micro1, "BFF", "NestJS", "BFF ADMINISTRATIVO", $sprite="nestjs")
    Container(micro2, "BFF", "NestJS", "BFF ADMINISTRATIVO", $sprite="nestjs")
    Container(micro3, "BFF", "NestJS", "BFF ADMINISTRATIVO", $sprite="nestjs")
}

ContainerQueue(rabbit, "Queue", "RabbitMQ", "Informations Parking", $sprite="add_to_queue")
ContainerDb(db, "Database", "MongoDB", "Informations Parking", $sprite="mongodb")



Rel(admin, frontweb, "")
Rel(user, bff, "")
Rel(frontweb, bff, "")
Rel(bff, micro1, "")
Rel(micro1, db, "")
Rel(micro1, rabbit, "processing_ticket")
Rel(micro2, rabbit, "processing_ticket")
Rel(micro3, rabbit, "processing_ticket")
Rel(micro2, db, "")
Rel(micro3, db, "")



@enduml